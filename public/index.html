<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>植物管理系統</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="tree.png" type="image/x-icon">
    <script src="script.js"></script>
</head>
<body class="theme-system">
    <!-- 第一部分：主題切換功能 -->
    <header class="header">
        <div class="header-inner">
            <h1 class="logo">植物管理系統</h1>
            <div class="theme-toggle">
                <label for="theme-selector">主題切換：</label>
                <select id="theme-selector">
                    <option value="system">系統</option>
                    <option value="light">亮色模式</option>
                    <option value="dark">暗色模式</option>
                </select>
            </div>
        </div>
    </header>
     <!-- 第二部分：主題切換的說明 -->
     <main>
        <section class="content">
            <h2>主題示例！</h2>
            <p>系統會依據設定或用戶選擇切換亮色與暗色模式。</p>
        </section>
    </main>

    
    <!-- 封面部分 -->
    <div id="cover" class="cover">
        <h1 class="cover-title">植物管理系統</h1>
        <p class="cover-subtitle">特殊選材 - 蘇子容</p>
        <p class="cover-tagline">Plant a Seed🌱</p>
        <button class="enter-button" onclick="enterApp()">進入瀏覽</button>
        <div class="additional-links">
            <a href="http://tlpg.hsiliu.org.tw/" target="_blank" class="button">臺灣植物景觀</a>
            <a href="https://www.inaturalist.org/" target="_blank" class="button">iNaturalist</a>
        </div>
    </div>
    

     <!-- 主頁面內容 -->
    <div id="main-content" class="hidden">
        <div class="container">
            <h1>植物管理系統</h1>
            <p class="author">製作者: 蘇子容</p>


        <!-- 新增植物資料 -->
        <h2>新增植物資料</h2>
        <form id="add-plant-form">
            <label>植物名稱: <input type="text" id="plant-name" required></label><br>
            <label>植物種類: <input type="text" id="plant-species"></label><br>
            <label>需水量:(c.c.) <input type="number" id="plant-water-requirement" step="0.01" max="9999999.99" required></label><br>
            <label>備註:</label>
            <textarea id="plant-notes" placeholder="可選填"></textarea><br>
            <button type="submit">新增植物</button>
        </form>
        <label>植物圖片: <input type="file" id="plant-image"></label>

        <!-- 新增土壤監測資料 -->
        <h2>新增土壤監測資料</h2>
        <form id="add-soil-form">
            <label>植物 ID: <input type="number" id="soil-plant-id" required></label><br>
            <label>土壤濕度: <input type="number" id="soil-moisture" step="0.1" required></label><br>
            <label>土壤 pH 值: <input type="number" id="soil-ph" step="0.1" required></label><br>
            <label for="soil-type">土壤選擇:</label>
            <select id="soil-type" name="soil-type">
                <option value="">-- 選擇土壤種類 --</option>
                <option value="弱育土 (Inceptisols)">弱育土 (Inceptisols)</option>
                <option value="淋溶土 (Alfisols)">淋溶土 (Alfisols)</option>
                <option value="極育土 (Ultisols)">極育土 (Ultisols)</option>
                <option value="新成土 (Entisols)">新成土 (Entisols)</option>
                <option value="黑沃土 (Mollisols)">黑沃土 (Mollisols)</option>
                <option value="灰燼土/火山灰土 (Andisols)">灰燼土/火山灰土 (Andisols)</option>
                <option value="膨轉土 (Vertisols)">膨轉土 (Vertisols)</option>
                <option value="有機質土 (Histosols)">有機質土 (Histosols)</option>
                <option value="淋澱土 (Spodosols)">淋澱土 (Spodosols)</option>
                <option value="氧化物土 (Oxisols)">氧化物土 (Oxisols)</option>
                <option value="旱境土 (Aridisols)">旱境土 (Aridisols)</option>
            </select>
            <button type="submit">新增土壤資料</button>
        </form>

        <!-- 新增環境監測資料 -->
        <h2>新增環境監測資料</h2>
        <form id="add-environment-form">
            <label>植物 ID: <input type="number" id="environment-plant-id" required></label><br>
            <label>溫度:(攝氏) <input type="number" id="environment-temperature" step="0.1" required></label><br>
            <label>濕度: <input type="number" id="environment-humidity" step="0.1" required></label><br>
            <label for="environment-location">基地位置:</label>
            <select id="environment-location" name="environment-location">
                <option value""> --請選擇基地位置--</option>
                <option value="台北市">台北市</option>
                <option value="新北市">新北市</option>
                <option value="基隆市">基隆市</option>
                <option value="桃園市">桃園市</option>
                <option value="新竹縣">新竹縣</option>
                <option value="新竹市">新竹市</option>
                <option value="苗栗縣">苗栗縣</option>
                <option value="台中市">台中市</option>
                <option value="彰化縣">彰化縣</option>
                <option value="南投縣">南投縣</option>
                <option value="雲林縣">雲林縣</option>
                <option value="嘉義縣">嘉義縣</option>
                <option value="嘉義市">嘉義市</option>
                <option value="台南市">台南市</option>
                <option value="高雄市">高雄市</option>
                <option value="屏東縣">屏東縣</option>
                <option value="宜蘭縣">宜蘭縣</option>
                <option value="花蓮縣">花蓮縣</option>
                <option value="台東縣">台東縣</option>
                <option value="澎湖縣">澎湖縣</option>
                <option value="金門縣">金門縣</option>
                <option value="連江縣">連江縣</option>
            </select>
            <br>
            <label>備註:</label>
            <textarea id="environment-notes" placeholder="可選填"></textarea>
            <br>
            <button type="submit">新增環境資料</button>
        </form>



        <h2>新增供水計畫</h2>
        <form id="add-water-schedule-form">
        <label>植物 ID: <input type="number" id="water-plant-id" required></label><br>
        <label>供水量 (ml): <input type="number" id="water-amount" step="0.01" required></label><br>
        <label>排程時間: <input type="datetime-local" id="scheduled-time" required></label><br>
        <button type="submit">新增供水計畫</button>
        </form>

    <script>
    // 新增供水計畫
    document.getElementById('add-water-schedule-form').addEventListener('submit', event => {
        event.preventDefault();
        fetch('/api/add-water-schedule', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                plant_id: parseInt(document.getElementById('water-plant-id').value),
                water_amount: parseFloat(document.getElementById('water-amount').value),
                scheduled_time: document.getElementById('scheduled-time').value
            })
        })
        .then(response => response.json())
        .then(data => alert(data.message))
        .catch(error => console.error('Error:', error));
    });
    </script>


        <h2>新增施肥記錄</h2>
        <form id="add-fertilization-form">
        <label>植物 ID: <input type="number" id="fertilization-plant-id" required></label><br>
        <label>是否需要施肥: 
        <select id="fertilization-needed" required >
            <option value="true">是</option>
            <option value="false">否</option>
        </select>
        </label><br>
        <label>施肥量 (g): <input type="number" id="fertilization-amount" step="0.01" required></label><br>
        <label>排程時間: <input type="datetime-local" id="fertilization-scheduled-time" required></label><br>
        <button type="submit">新增施肥記錄</button>
        </form>


        <button id="get-plants-btn">查詢所有植物資料</button>
        <div id="results"></div>
        <footer>
            <p>製作者: 蘇子容</p>
        </footer>
    </div>

    <script>

            // 切換到主頁面
        function enterApp() {
            document.getElementById('cover').style.display = 'none';
            document.getElementById('main-content').classList.remove('hidden');
        }




        // 新增植物資料
        document.getElementById('add-plant-form').addEventListener('submit', event => {
            event.preventDefault();
            fetch('/api/add-plant', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    name: document.getElementById('plant-name').value,
                    species: document.getElementById('plant-species').value,
                    water_requirement: parseFloat(document.getElementById('plant-water-requirement').value)
                })
            }).then(response => response.json())
              .then(data => alert(data.message))
              .catch(error => console.error('Error:', error));
        });
        // 其他表單事件處理器保持不變
    </script>

</body>
</html>
